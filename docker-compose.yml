version: '3.3'
services:

  freeswitch:
    hostname: freeswitch
    build:
      context: ./freeswitch
      dockerfile: DockerFile
    networks:
      lan:
        ipv4_address: 10.10.1.1


  rabbitmq:
    platform: linux/amd64
    hostname: rabbitmq
    build:
        context: ./rabbitmq
        dockerfile: DockerFile
    networks:
        lan:
            ipv4_address: 10.10.1.2

  kamailio:
    platform: linux/amd64
    hostname: kamailio
    build:
      context: ./kamailio
      dockerfile: DockerFile
    networks:
      lan:
        ipv4_address: 10.10.1.3

  couchdb:
    image: couchdb:2.3.1
    environment:
      - COUCHDB_USER=admin
      - COUCHDB_PASSWORD=admin
    networks:
      lan:
        ipv4_address: 10.10.1.4

  haproxy:
    hostname: haproxy
    build:
      context: ./haproxy
      dockerfile: DockerFile
    networks:
        lan:
            ipv4_address: 10.10.1.5

networks:
  lan:
    driver: bridge
    ipam:
      config:
        - subnet: 10.10.1.0/24